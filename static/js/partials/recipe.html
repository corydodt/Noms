<div ng-controller="Recipe"> <!-- alert  -->
    <div>
        <div class="alert-message">
            {{ message }}
        </div>
    </div>
 
    <!--  individual recipe  -->
    <form editable-form name="recipeForm" onaftersave="saveRecipe()" class="recipe-form">

        <div class="form-button-group">
            <!-- button to show form -->
            <!-- old edit form  -->
            <md-button md-no-ink="" type="button" class="form-button" ng-click="recipeForm.$show()" ng-show="!recipeForm.$visible">
                Edit
            </md-button>

            <!-- new edit attempt  -->
            <md-button type=button ng-click="showTabDialog($event)">
                New Edit attempt 
            </md-button>

            <md-button md-no-link="" ng-click="deleteConfirm($event, recipe)" >
                Delete
            </md-button>

            <!-- buttons to submit / cancel form -->
            <span ng-show="recipeForm.$visible">
                <md-button md-no-link type="submit" class="form-button" ng-disabled="recipeForm.$waiting">
                    Save
                </md-button>
                <md-button type="button" class="form-button" ng-disabled="recipeForm.$waiting" ng-click="recipeForm.$cancel()">
                    Cancel
                </md-button>
            </span>
        </div>

        <div class="recipe-header">
            <div class="recipe-description"> 
                <h2 href="#" editable-text="recipe.name" class="recipe-name" e-required>{{ recipe.name }}</h2> 
                <div class="row-section">
                    <div>
                        <span class="section-title">Author:</span>
                        <span href="#" editable-text="recipe.author" class="section-text" e-required>{{ recipe.author }}</span>
                    </div>
                    <div>
                        <span class="section-title">User:</span>
                        <span href="#" class="section-text">{{ recipe.user.givenName }}</span>
                        <span href="#" class="section-text">{{ recipe.user.familyName }}</span> 
                        <span href="#" class="section-text">({{ recipe.user.email }})</span> 
                    </div>
                    <div>
                        <span class="section-title">Last Modified:</span>
                        <span class="section-text">{{ recipe.modified }}</span>
                    </div>
                    <div>
                        <span class="section-title">Recipe Yield:</span>
                        <span href="#" editable-text="recipe.recipeYield" class="section-text" e-required>{{ recipe.recipeYield }}</span>
                    </div>
                    <div>
                        <span class="section-title">Tags:</span>
                        <ul ng-repeat="tag in recipe.tags">
                            <li>
                                <span editable-text="tag.description">{{ tag.description }}</span>
                                <button type=button ng-show="recipeForm.$visible" ng-click="remove(recipe.tags, $index)">x</button>
                            </li>
                        </ul>
                    </div>
                    <br/>

                </div>
            </div> 
        </div>

        <div class="recipe-section">

            <!-- Ingredient sections  -->
            <div class="ingredients">
                <span class="row-title">INGREDIENTS</span>
                <ul ng-repeat="ingredient in recipe.ingredients">
                    <li>
                        <i class="fa fa-check" aria-hidden="true"></i>
                        <span editable-text="ingredient.description">{{ ingredient.description }}</span>
                        <button type=button ng-show="recipeForm.$visible" ng-click="remove(recipe.ingredients, $index)">x</button>
                    </li>
                </ul>
                <button type=button ng-show="recipeForm.$visible" ng-click="add(recipe.ingredients)">Add Ingredient</button>
            </div>

            <!-- Directions -->
            <div class="directions">
                <span class="row-title">DIRECTIONS</span>
                <ul ng-repeat="instruction in recipe.instructions">
                    <li>
                        <i class="fa fa-long-arrow-right" aria-hidden="true"></i>
                        <span editable-text="instruction.description">{{ instruction.description }}</span>
                        <button ng-show="recipeForm.$visible" ng-click="remove(recipe.instructions, $index)">x</button>
                    </li>
                </ul>
                <button type=button ng-show="recipeForm.$visible" ng-click="add(recipe.instructions)">Add Instructions</button>
            </div>
        </div>
    </form>
</div>
FROM ubuntu:16.04

RUN apt-get update && apt-get install -y \
    python python-dev python-pip \
    libffi-dev libssl-dev \
    mongodb-clients \
    netcat \
    ruby-bundler
ENV noms /opt/Noms
ENV PATH $PATH:$noms/bin
ENV PYTHONPATH $noms
COPY ./Gemfile /Gemfile
RUN bundle update
COPY ./requirements.txt /requirements.txt
RUN pip install -r "/requirements.txt"

EXPOSE 8080

ENTRYPOINT ["docker-init"]
CMD ["/bin/bash"]

WORKDIR $noms
